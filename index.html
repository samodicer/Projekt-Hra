<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>THE ROBOT</title>
    <link rel="stylesheet" type="text/css" href="style/style.css">
</head>

<body>
    <img id="logo" src ="images/therobot.png"></img>
    <div id="container"> 

        <div id="menu"> 

            <img id="button1" src="images/button1.png" width="170" height="80" alt="submit">

            <div id="wrapper">

                <div class="slideDown">

                    <div class="form_div" id ="name_form">

                        <label for="player_name"><b>ZADAJ PREZÝVKU:</b></label> <br/> 
                        <input type="text" id="player_name" name="player_name" maxlength="15"> 

                    </div>
    
                    <div class="form_div">

                        <button id="start_button" name="start_game" onclick="checkNickname()">ZAČAŤ HRAŤ</button>

                    </div>

                    <p id="answer">  </p>

                </div>

            </div>

            <img id="button2" src="images/button2.png" width="170" height="80" alt="submit">

            <div id="wrapper2">

                <div class="slideDown">

                    <h2>OVLÁDANIE</h2>
                        <table id="table1" align="center" >
                            <tr>
                              <td><div class="letter"> W </div></td><td>Skok</td>
                            </tr>
                            <tr>
                              <td><div class="letter"> A </div></td><td>Pohyb doľava</td>
                            </tr>
                            <tr>
                                <td><div class="letter"> D </div></td><td>Pohyb doprava</td>
                            </tr>
                            <tr>
                                <td><div class="letter"> LEFT CLICK </div></td><td>Streľba</td>
                            </tr>
                        </table>

                </div>

            </div>

        </div>

        <canvas id="canvas" width="760" height="480" oncontextmenu="return false;"></canvas>

        <script type="text/javascript" src="js/Game.js"></script>
        <script type="text/javascript" src="js/World.js"></script>
        <script type="text/javascript" src="js/Player.js"></script>
        <script type="text/javascript" src="js/Enemy.js"></script>
        <script type="text/javascript" src="js/Bullet.js"></script>
        <script type="text/javascript" src="js/Animation.js"></script>
        <script type="text/javascript" src="js/Sheets.js"></script>
        <script type="text/javascript" src="js/Camera.js"></script>
        <script type="text/javascript" src="js/Controller.js"></script>
        <script type="text/javascript" src="js/Key.js"></script>
        <script type="text/javascript" src="js/Ghost.js"></script>
        <script type="text/javascript" src="js/Assassin.js"></script>
        <script type="text/javascript" src="js/Door.js"></script>
        <script type="text/javascript" src="js/Obstacle.js"></script>
        <script type="text/javascript" src="js/MovingObstacle.js"></script>
        <script type="text/javascript" src="js/DisappearingObstacle.js"></script>
        <script type="text/javascript" src="js/Point.js"></script>
        <script type="text/javascript" src="js/Life.js"></script>
        <script type="text/javascript" src="js/Attacker.js"></script>
        <script type="text/javascript" src="js/Button.js"></script>
        <script type="text/javascript" src="js/Computer.js"></script>
        <script type="text/javascript" src="js/Window.js"></script>
        <script type="text/javascript" src="js/Bubble.js"></script>
        <script type="text/javascript" src="js/Story.js"></script>

    </div>

    <script type="text/javascript">
        document.getElementById("button1").addEventListener("click", function () {
            if(document.getElementById("wrapper").style.height == "270px"){
                document.getElementById("wrapper").style.height = "0px";
            }else{
                document.getElementById("wrapper").style.height = "270px";
                document.getElementById("wrapper2").style.height = "0px";
            }
        });
        document.getElementById("button2").addEventListener("click", function () {
            if(document.getElementById("wrapper2").style.height == "270px"){
                document.getElementById("wrapper2").style.height = "0px";
            }else{
                document.getElementById("wrapper2").style.height = "270px";
                document.getElementById("wrapper").style.height = "0px";
            }
        });

        // vytvorenie inštancie triedy Game
        var game = new Game();
        // načítanie obrázkov a audia
        game.loadImages();
        game.loadAudio();

        // validácia prezývky
        function checkNickname() {
            var nickname = document.getElementById("player_name").value;
            var allowed = /^[a-zA-Z0-9]{3,15}$/; // povolené znkay a rozsah

            if (!allowed.test(nickname)) {

                if(nickname.length < 3) document.getElementById("answer").innerHTML = "Minimálny počet znakov sú 3, maximálny počet je 15.";
                else document.getElementById("answer").innerHTML = "Povolené sú veľké a malé písmená [A-Z , a-z] a číslice [0-9].";

            } else game.story.playStory(); // ak je prezývka v poriadku spusti príbeh
        }

    </script>
</body>

</html>